<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin – Hokejová časomíra</title>
<style>
  body {
    margin: 0;
    background: #0d1117;
    color: white;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 30px;
  }
  h1 {
    color: #00aaff;
    text-shadow: 0 0 10px #00aaff;
  }
  .panel {
    background: #111;
    padding: 25px 35px;
    border-radius: 12px;
    box-shadow: 0 0 20px rgba(0,170,255,0.4);
    width: 420px;
  }
  label { color: #00aaff; display: block; margin-top: 10px; font-weight: bold; }
  input {
    width: 100%;
    padding: 8px;
    font-size: 16px;
    background: #1a1f25;
    color: white;
    border: 1px solid #333;
    border-radius: 6px;
    margin-top: 4px;
    outline: none;
  }
  .buttons { display: flex; justify-content: space-between; gap: 10px; margin-top: 20px; }
  button {
    flex: 1;
    border: none;
    border-radius: 6px;
    padding: 10px;
    font-size: 16px;
    font-weight: bold;
    color: white;
    cursor: pointer;
    transition: background 0.2s;
  }
  .toggle { background: #00c853; }
  .toggle.stop { background: #d32f2f; }
  .reset { background: #1976d2; }
  .anim { background: #9c27b0; }
</style>
</head>
<body>
<h1>⚙️ Admin panel – Hokejová časomíra</h1>

<div class="panel">
  <label>🕒 Čas (MM:SS)</label>
  <input id="time" value="20:00">

  <label>📅 Třetina</label>
  <input id="period" value="1. třetina">

  <label>🏒 Tým 1</label>
  <input id="team1" value="VLA">

  <label>🏒 Tým 2</label>
  <input id="team2" value="BEN">

  <label>Skóre 1</label>
  <input id="score1" type="number" value="0">

  <label>Skóre 2</label>
  <input id="score2" type="number" value="0">

  <div class="buttons">
    <button id="toggleBtn" class="toggle">▶️ Spustit</button>
    <button id="reset" class="reset">🔁 Reset</button>
  </div>
  <div class="buttons">
    <button id="anim" class="anim">🎬 Animace</button>
  </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getDatabase, ref, update, onValue } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

  const app = initializeApp({
    apiKey: "AIzaSyANQRaMe5QV3Onn3wkBvNx_AxgJA-81D-Q",
    authDomain: "hcvlasim.firebaseapp.com",
    databaseURL: "https://hcvlasim-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "hcvlasim"
  });
  const db = getDatabase(app);
  const sb = ref(db, "scoreboard/");

  let running = false;

  const btn = document.getElementById("toggleBtn");
  const getTime = () => document.getElementById("time").value;

  btn.onclick = () => {
    running = !running;
    if (running) {
      btn.textContent = "⏸️ Zastavit";
      btn.classList.add("stop");
    } else {
      btn.textContent = "▶️ Spustit";
      btn.classList.remove("stop");
    }
    update(sb, { running });
  };

  document.getElementById("reset").onclick = () => {
    running = false;
    btn.textContent = "▶️ Spustit";
    btn.classList.remove("stop");
    update(sb, { running: false, time: "20:00" });
    document.getElementById("time").value = "20:00";
  };

  document.getElementById("anim").onclick = () => {
    update(sb, { animation: "toggle" });
  };

  document.getElementById("time").addEventListener("input", () => {
    update(sb, { time: getTime() });
  });

  onValue(sb, (snap) => {
    const d = snap.val();
    if (!d) return;
    document.getElementById("time").value = d.time || "20:00";
  });
</script>
</body>
</html>
